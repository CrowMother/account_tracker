# agents.md

This file defines the Codex agent's behavior for the `CrowMother/account_tracker` repository. The agent serves as an intelligent collaborator—automating testing, documentation upkeep, environment verification, and security auditing. Any future commits to this repo are evaluated and enhanced by the agent according to the rules below.

---

## 🧠 Agent Behavior

### 🔁 1. Continuous Integration and Testing

- On every commit:
  - Run all Python unit tests in the `tests/` directory.
  - If no tests are found for modified functions, automatically generate them and save to `tests/autogenerated/`.
  - Output test coverage and flag untested logic.
  - If `.env` or `tokens.json` are missing, log a warning but do not block execution.

### 🧪 2. Manual Test Generation

- For every primary entry point (e.g., `main.py`), generate scenario-based manual test cases simulating user actions, edge cases, or likely failure conditions.
- Save or update these in:
  - `tests/manual_tests.md`

Examples:
- Test missing `.env` or malformed keys.
- Test expired or absent `tokens.json`.
- Simulate API rate-limiting or auth failure from Schwab API.

### 🔐 3. Secret & Security Validation

- Scan all new code for hardcoded secrets, API tokens, and sensitive data.
- If any are found:
  - Flag the line and reject commit if critical (e.g., hardcoded secret).
  - Recommend using Codex environment variables or `.env`.

### 📄 4. Documentation & Interface Sync

- Watch for changes in function definitions, arguments, or key files.
- If docstrings or README.md are outdated, suggest diffs and proposed replacements.
- Auto-update `agents.md` if the behavior defined here is superseded.

### ✅ 5. Linting & Style

- Run static analysis (PEP8, flake8-style) on every commit.
- Suggest or autofix:
  - Unused imports
  - Bad formatting
  - Inefficient or overly complex expressions

### 📦 6. Dependency Hygiene

- Monitor `pip install`, `requirements.txt`, or `setup.py` for:
  - Outdated packages
  - Missing version pins
- Recommend updates or locks to avoid future breakage.

### 🧾 7. Token Health (Optional)

- If `tokens.json` exists, check if:
  - It’s expired (via `expires_at` timestamp)
  - It's malformed or empty
- Warn if re-authentication may be required soon.

---

## 📂 Output Targets

- Logs: `logs/agents_activity.log`
- Auto Tests: `tests/autogenerated/`
- Manual Tests: `tests/manual_tests.md`
- Suggestions (docs/tests): Commented in pull requests or pushed to temp branches

---

## 🛠️ Environment Expectations

The agent assumes:
- Python 3.12
- Environment variables `SCHWAB_APP_KEY` and `SCHWAB_APP_SECRET` are available at runtime
- `tokens.json` is manually generated and located in project root

---

## 🧠 Agent Identity

- Name: `CrowMother QA Agent`
- Version: `v1.0`
- Permissions: Code analysis, test writing, file editing (limited to `/tests`, `/logs`, `/docs`)

---
